plugins {
    id 'java'
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
    implementation 'com.github.monkeywie:proxyee:1.3.3'
}

jar {
    manifest {
        attributes "Main-Class": "com.github.rzabini.localproxy.LoopbackProxyServerApp"
    }

    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }

    // see https://stackoverflow.com/questions/51455197/gradle-fatjar-could-not-find-or-load-main-class
    exclude 'META-INF/*.RSA'
    exclude 'META-INF/*.SF'
    exclude 'META-INF/*.DSA'
}